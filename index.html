<!DOCTYPE html>
<html lang="sr">
<head>
  <meta charset="UTF-8">
  <title>Servis Telefona - POS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f4f4f4; }
    header {
      background: #222; color: white; padding: 15px;
      text-align: center; font-size: 20px;
    }
    .login-box, .main-box {
      max-width: 600px; margin: 40px auto;
      background: white; padding: 20px;
      border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    input, button {
      width: 100%; padding: 10px; margin: 10px 0;
      font-size: 16px;
    }
    table {
      width: 100%; border-collapse: collapse; margin-top: 20px;
    }
    th, td {
      border: 1px solid #ccc; padding: 10px;
      text-align: left;
    }
    th { background: #e8f0fe; }
    .logout-btn {
      float: right; background: red; color: white; border: none; padding: 8px 12px; cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    Servis Telefona
    <button class="logout-btn" onclick="logout()">Izloguj se</button>
  </header>

  <div class="login-box" id="loginBox">
    <h2>Prijava</h2>
    <input type="text" id="username" placeholder="Korisniƒçko ime">
    <input type="password" id="password" placeholder="Lozinka">
    <button onclick="login()">Prijavi se</button>
  </div>

  <div class="main-box" id="appBox" style="display:none;">
    <h2>üì• Novi ureƒëaj</h2>
    <input id="klijent" placeholder="Ime klijenta">
    <input id="telefon" placeholder="Telefon">
    <input id="marka" placeholder="Marka">
    <input id="model" placeholder="Model">
    <input id="kvar" placeholder="Opis kvara">
    <input id="datum" type="date">
    <button onclick="dodaj()">Saƒçuvaj</button>

    <h3>üìã Lista ureƒëaja</h3>
    <table>
      <thead>
        <tr><th>Klijent</th><th>Telefon</th><th>Marka</th><th>Model</th><th>Kvar</th><th>Datum</th></tr>
      </thead>
      <tbody id="tabela"></tbody>
    </table>
  </div>

  <script>
    const USER = "admin";
    const PASS = "admin";

    const DB_KEY = "servis_podaci";

    function login() {
      const u = document.getElementById("username").value;
      const p = document.getElementById("password").value;
      if (u === USER && p === PASS) {
        localStorage.setItem("ulogovan", "da");
        prikaziAplikaciju();
      } else {
        alert("Pogre≈°ni podaci");
      }
    }

    function logout() {
      localStorage.removeItem("ulogovan");
      location.reload();
    }

    function prikaziAplikaciju() {
      document.getElementById("loginBox").style.display = "none";
      document.getElementById("appBox").style.display = "block";
      prikaziPodatke();
    }

    function dodaj() {
      const podatak = {
        klijent: document.getElementById("klijent").value,
        telefon: document.getElementById("telefon").value,
        marka: document.getElementById("marka").value,
        model: document.getElementById("model").value,
        kvar: document.getElementById("kvar").value,
        datum: document.getElementById("datum").value
      };

      let podaci = JSON.parse(localStorage.getItem(DB_KEY)) || [];
      podaci.push(podatak);
      localStorage.setItem(DB_KEY, JSON.stringify(podaci));
      prikaziPodatke();
      ['klijent','telefon','marka','model','kvar','datum'].forEach(id => document.getElementById(id).value = "");
    }

    function prikaziPodatke() {
      const podaci = JSON.parse(localStorage.getItem(DB_KEY)) || [];
      const tabela = document.getElementById("tabela");
      tabela.innerHTML = "";
      podaci.forEach(p => {
        tabela.innerHTML += `<tr>
          <td>${p.klijent}</td><td>${p.telefon}</td>
          <td>${p.marka}</td><td>${p.model}</td>
          <td>${p.kvar}</td><td>${p.datum}</td>
        </tr>`;
      });
    }

    if (localStorage.getItem("ulogovan") === "da") {
      prikaziAplikaciju();
    }
  </script>
</body>
</html>
